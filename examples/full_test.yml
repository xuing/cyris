# Modified version of full.yml for testing with existing infrastructure
- host_settings:
  - id: host_1
    mgmt_addr: localhost
    virbr_addr: 192.168.122.1
    account: ubuntu

- guest_settings:
  # Desktop VM
  - id: desktop
    ip_addr: 192.168.122.50
    basevm_host: host_1
    basevm_config_file: /home/ubuntu/cyris/test_minimal_vm.xml
    basevm_type: kvm
    tasks:
    - add_account:
      - account: daniel
        passwd: danielpass
        full_name: Daniel Radcliffe
    - modify_account:
      - account: root
        new_passwd: abcd1234
    - install_package:
      - package_manager: apt
        name: wireshark
      - package_manager: apt
        name: nmap

  # Web Server VM  
  - id: webserver
    ip_addr: 192.168.122.51
    basevm_host: host_1
    basevm_config_file: /home/ubuntu/cyris/test_minimal_vm.xml
    basevm_type: kvm
    tasks:
    - add_account:
      - account: daniel
        passwd: JamesBond
    - modify_account:
      - account: root
        new_passwd: new-root-password
    - install_package:
      - package_manager: apt
        name: apache2
      - package_manager: apt  
        name: php

- clone_settings:
  - range_id: full_test
    hosts:
    - host_id: host_1
      instance_number: 1
      guests:
      - guest_id: desktop
        number: 1
        entry_point: yes
      - guest_id: webserver
        number: 1
      topology:
      - type: custom
        networks:
        - name: office_network
          members: desktop.eth0,webserver.eth0
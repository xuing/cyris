#cloud-config
users:
  - default
  - name: ubuntu
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC7vbqajDhA... # placeholder - will be replaced
  - name: trainee01
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    groups: users,admin
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC7vbqajDhA... # placeholder - will be replaced

# Set passwords (for demonstration - in production use keys only)
chpasswd:
  list: |
    ubuntu:ubuntu
    trainee01:trainee123
  expire: False

# Enable password authentication temporarily for testing
ssh_pwauth: True

# Install packages
packages:
  - openssh-server
  - curl
  - wget
  - vim
  - net-tools

# Enable services
runcmd:
  - systemctl enable ssh
  - systemctl start ssh
  - echo "Cloud-init setup complete" > /var/log/cloud-init-setup.log